# Port Gap Analysis - December 13, 2025

## Overview

This analysis compares the Elixir `codex_sdk` against its two source codebases:
- **codex/** - TypeScript SDK for Codex CLI
- **openai-agents-python/** - Python SDK for OpenAI Agents

## Documents

| Document | Description |
|----------|-------------|
| [UNPORTED_FEATURES.md](./UNPORTED_FEATURES.md) | Executive summary of gaps and priority rankings |
| [FEATURE_INVENTORY.md](./FEATURE_INVENTORY.md) | Complete feature-by-feature comparison matrix |
| [IMPLEMENTATION_RECOMMENDATIONS.md](./IMPLEMENTATION_RECOMMENDATIONS.md) | Code examples for implementing missing features |

## Key Findings

### Feature Parity: ~85-90%

The Elixir SDK has successfully ported the vast majority of features from both source SDKs.

### Fully Ported Features

- Core agent/thread system
- Tool system with FunctionTool macro
- Guardrails (input, output, tool-specific)
- Handoffs between agents
- MCP client support
- Streaming execution
- Telemetry via OpenTelemetry
- File attachments and search
- Structured output
- Approval workflows
- Session behavior (with in-memory implementation)

### Notable Gaps

| Gap | Priority | Source |
|-----|----------|--------|
| Realtime audio | HIGH (if needed) | Python |
| Voice pipeline (STT/TTS) | HIGH (if needed) | Python |
| Persistent session backends | MEDIUM | Python |
| Lifecycle hooks behavior | MEDIUM | Python |
| Hosted tool wrappers | MEDIUM | Python |
| Image input type | LOW-MEDIUM | TypeScript |

### Intentionally Not Ported

- **Shell Tool MCP Server** - Elixir relies on codex binary; standalone MCP server not needed
- **LiteLLM multi-provider** - Codex binary handles model routing
- **Docstring parsing** - Elixir uses explicit schema definition (more type-safe)

## Recommendations

### Immediate (This Sprint)

1. Verify `previous_response_id` and `conversation_id` work correctly
2. Document sandbox mode mapping between SDKs
3. Consider adding explicit image input type

### Short-Term (Next Release)

1. Add persistent session backend (ETS or DETS)
2. Define `Codex.Hooks` behavior formally
3. Add convenience wrappers for hosted tools

### Medium-Term (Future)

1. Implement realtime/voice if use cases require
2. Add Redis/Ecto session adapters
3. Add ApplyPatch tool for file editing

## Conclusion

The Elixir SDK is **production-ready** for all text-based agent workflows. The main gaps (realtime/voice) are intentionally stubbed and can be implemented when specific use cases require them.

---

*Generated by automated gap analysis comparing codex/, openai-agents-python/, and codex_sdk/ codebases.*
